

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>String list processing &mdash; IPython</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="IPython" href="index.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <div class="logo"><a href="index.html">
            <img class="logo" src="_static/logo.png" alt="Logo"/>
          </a></div>
       
        <div class="rel">
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
             
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"> 
<h3>Versions</h3>

<div class="tile"><h4>Stable</h4>
     0.10.2 &ndash; April&nbsp;2011<br/>
    <a href="download.html">Download</a>
</div>

<div class="tile"><h4>Development</h4>
    pre-0.11<br/>
    <a href="https://github.com/ipython/ipython">Github</a>
</div>
<h3>Links</h3>

  <ul class="simple">
    <li><a class="reference external"
    href="index.html">Home</a></li>           
    <li><a class="reference external"
    href="http://ipython.github.com/ipython-doc/">Documentation</a></li>
    <li><a class="reference external" href="https://github.com/ipython/ipython/issues">
            Issue tracker</a></li>
    <li>Mailing lists:<br/><span style="padding-left: 1em;">
        <a class="reference external" href="http://projects.scipy.org/mailman/listinfo/ipython-user">
            User</a> · 
        <a class="reference external" href="http://projects.scipy.org/mailman/listinfo/ipython-dev">
            Dev</a>
        </li></span>
    <li><a class="reference external" href="http://webchat.freenode.net/?channels=ipython&uio=d4">
            IRC channel</a><br/>
            <span style="font-size: 0.7em; padding-left: 1em;">(Freenode, #ipython)</span></li>
  </ul>
  
  
  <br/>
  <ul class="simple">
    <li><a class="reference external" href="news.html">News</a></li>
    <li><a class="reference external"
    href="presentation.html">Presentations</a></li>
    <li><a class="reference external" href="faq.html">FAQ</a></li>
    <li><a class="reference external"
    href="http://ipython.scipy.org/moin/Cookbook">Cookbook</a></li>
    <li><a class="reference external"
    href="http://ipython.scipy.org/moin/Developer_Zone">Developer Zone</a></li>
    <li><a class="reference external"
    href="http://ipython.scipy.org/moin/About/Projects_Using_IPython">Projects using IPython</a></li>
  </ul>
        </div>
      </div>
        
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="string-list-processing">
<h1>String list processing<a class="headerlink" href="#string-list-processing" title="Permalink to this headline">¶</a></h1>
<p>String lists are handy way to process output from system commands.</p>
<p>First, we acquire the output of &#8216;ls -l&#8217;:</p>
<div class="highlight-python"><pre>[Q:doc/examples]|2&gt; lines = !ls -l
==
['total 23',
'-rw-rw-rw- 1 ville None 1163 Sep 30  2006 example-demo.py',
'-rw-rw-rw- 1 ville None 1927 Sep 30  2006 example-embed-short.py',
'-rwxrwxrwx 1 ville None 4606 Sep  1 17:15 example-embed.py',
'-rwxrwxrwx 1 ville None 1017 Sep 30  2006 example-gnuplot.py',
'-rwxrwxrwx 1 ville None  339 Jun 11 18:01 extension.py',
'-rwxrwxrwx 1 ville None  113 Dec 20  2006 seteditor.py',
'-rwxrwxrwx 1 ville None  245 Dec 12  2006 seteditor.pyc']</pre>
</div>
<p>Now, let&#8217;s take a look at the contents of &#8216;lines&#8217; (the first number is the list element number):</p>
<div class="highlight-python"><pre>[Q:doc/examples]|3&gt; lines
                &lt;3&gt; SList (.p, .n, .l, .s, .grep(), .fields() available). Value:

0: total 23
1: -rw-rw-rw- 1 ville None 1163 Sep 30  2006 example-demo.py
2: -rw-rw-rw- 1 ville None 1927 Sep 30  2006 example-embed-short.py
3: -rwxrwxrwx 1 ville None 4606 Sep  1 17:15 example-embed.py
4: -rwxrwxrwx 1 ville None 1017 Sep 30  2006 example-gnuplot.py
5: -rwxrwxrwx 1 ville None  339 Jun 11 18:01 extension.py
6: -rwxrwxrwx 1 ville None  113 Dec 20  2006 seteditor.py
7: -rwxrwxrwx 1 ville None  245 Dec 12  2006 seteditor.pyc</pre>
</div>
<p>Now, let&#8217;s filter out the &#8216;embed&#8217; lines:</p>
<div class="highlight-python"><pre>[Q:doc/examples]|4&gt; l2 = lines.grep('embed',prune=1)
[Q:doc/examples]|5&gt; l2
               &lt;5&gt; SList (.p, .n, .l, .s, .grep(), .fields() available). Value:

0: total 23
1: -rw-rw-rw- 1 ville None 1163 Sep 30  2006 example-demo.py
2: -rwxrwxrwx 1 ville None 1017 Sep 30  2006 example-gnuplot.py
3: -rwxrwxrwx 1 ville None  339 Jun 11 18:01 extension.py
4: -rwxrwxrwx 1 ville None  113 Dec 20  2006 seteditor.py
5: -rwxrwxrwx 1 ville None  245 Dec 12  2006 seteditor.pyc</pre>
</div>
<p>Now, we want strings having just file names and permissions:</p>
<div class="highlight-python"><pre>[Q:doc/examples]|6&gt; l2.fields(8,0)
               &lt;6&gt; SList (.p, .n, .l, .s, .grep(), .fields() available). Value:

0: total
1: example-demo.py -rw-rw-rw-
2: example-gnuplot.py -rwxrwxrwx
3: extension.py -rwxrwxrwx
4: seteditor.py -rwxrwxrwx
5: seteditor.pyc -rwxrwxrwx</pre>
</div>
<p>Note how the line with &#8216;total&#8217; does not raise IndexError.</p>
<p>If you want to split these (yielding lists), call fields() without arguments:</p>
<div class="highlight-python"><pre>[Q:doc/examples]|7&gt; _.fields()
               &lt;7&gt;
[['total'],
 ['example-demo.py', '-rw-rw-rw-'],
['example-gnuplot.py', '-rwxrwxrwx'],
['extension.py', '-rwxrwxrwx'],
['seteditor.py', '-rwxrwxrwx'],
 ['seteditor.pyc', '-rwxrwxrwx']]</pre>
</div>
<p>If you want to pass these separated with spaces to a command (typical for lists if files), use the .s property:</p>
<div class="highlight-python"><pre>[Q:doc/examples]|13&gt; files = l2.fields(8).s
[Q:doc/examples]|14&gt; files
              &lt;14&gt; 'example-demo.py example-gnuplot.py extension.py seteditor.py seteditor.pyc'
[Q:doc/examples]|15&gt; ls $files
example-demo.py  example-gnuplot.py  extension.py  seteditor.py  seteditor.pyc</pre>
</div>
<p>SLists are inherited from normal python lists, so every list method is available:</p>
<div class="highlight-python"><pre>[Q:doc/examples]|21&gt; lines.append('hey')</pre>
</div>
<div class="section" id="real-world-example-remove-all-files-outside-version-control">
<h2>Real world example: remove all files outside version control<a class="headerlink" href="#real-world-example-remove-all-files-outside-version-control" title="Permalink to this headline">¶</a></h2>
<p>First, capture output of &#8220;hg status&#8221;:</p>
<div class="highlight-python"><pre>[Q:/ipython]|28&gt; out = !hg status
 ==
['M IPython\\Extensions\\ipy_kitcfg.py',
'M IPython\\Extensions\\ipy_rehashdir.py',
...
'? build\\lib\\IPython\\Debugger.py',
'? build\\lib\\IPython\\Extensions\\InterpreterExec.py',
'? build\\lib\\IPython\\Extensions\\InterpreterPasteInput.py',</pre>
</div>
<p>...</p>
<p>(lines starting with ? are not under version control).:</p>
<div class="highlight-python"><pre>[Q:/ipython]|35&gt; junk = out.grep(r'^\?').fields(1)
[Q:/ipython]|36&gt; junk
            &lt;36&gt; SList (.p, .n, .l, .s, .grep(), .fields() availab
...
10: build\bdist.win32\winexe\temp\_ctypes.py
11: build\bdist.win32\winexe\temp\_hashlib.py
12: build\bdist.win32\winexe\temp\_socket.py</pre>
</div>
<p>Now we can just remove these files by doing &#8216;rm $junk.s&#8217;.</p>
</div>
<div class="section" id="the-s-n-p-properties">
<h2>The .s, .n, .p properties<a class="headerlink" href="#the-s-n-p-properties" title="Permalink to this headline">¶</a></h2>
<p>The &#8216;.s&#8217; property returns one string where lines are separated by single space (for convenient passing to system commands). The &#8216;.n&#8217; property return one string where the lines are separated by &#8216;n&#8217; (i.e. the original output of the function). If the items in string list are file names, &#8216;.p&#8217; can be used to get a list of &#8220;path&#8221; objects for convenient file manipulation.</p>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="clearer"></div>
    </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright .
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>